%table
  %tr
    %th Item
    %th Quantity
    %th Unit Price
    %th Subtotal
    -@cart.products.each do |product|
      %tr
        %td
          = product.name
        %td
          %form{ action: update_quantity_cart_path, method: 'post' }
            %input{ type: 'text', name: 'quantity', value: @cart.cart_products.find_by_product_id(product.id).quantity }
            %input{ type: 'hidden', name: 'product_id', value: product.id}
            %input{ type: 'submit', name: 'update_quantity', value: 'Update Quantity'}
        
        %td
          = product.price
        %td
          = @cart.cart_products.find_by_product_id(product.id).quantity * product.price
        %td
          = form_tag delete_product_cart_path do
            = hidden_field_tag 'product_id', product.id
            = submit_tag 'Remove from cart'
%p

%form{ action: checkout_path, method: 'get' }
  %input{ type: 'submit', name: 'checkout', value: 'checkout'}

